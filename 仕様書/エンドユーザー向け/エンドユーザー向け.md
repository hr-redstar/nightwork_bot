# Nightwork Bot ご利用ガイド

このガイドは、Nightwork Botの各機能の使い方を説明するものです。
管理者向けの設定と、従業員向けの日常的な操作に分けて説明します。

## 目次
- [初期設定](#1-初期設定)
- [経費の申請と管理](#2-経費の申請と管理)
- [売上の報告と管理](#3-売上の報告と管理)
- [出勤・退勤の打刻](#4-出勤退勤の打刻)
- [メッセージ一括送信](#5-メッセージ一括送信)
- [KPI（目標）管理](#6-kpi目標管理)
- [店内状況・ひっかけ管理](#7-店内状況ひっかけ管理)
- [ChatGPT連携](#8-chatgpt連携)
- [くじ引き](#9-くじ引き)
- [ダイス](#10-ダイス)

---

## 1. 初期設定 (/設定)

Nightwork Botをサーバーに導入した後、最初に行う必要がある基本的な設定です。この設定は、サーバーの管理者権限を持つユーザーのみが実行できます。
店舗情報や役職とDiscordロールの紐付けを行うことで、Botの全機能が正しく動作するようになります。

### 管理者向け操作

1.  **コマンド実行**:
    *   管理者だけが閲覧できるような、プライベートなチャンネルで `/設定` コマンドを実行することを推奨します。
2.  **設定パネル表示**:
    *   Botが、各種設定を行うためのボタンが配置された「設定パネル」を送信します。このパネルはコマンドが実行されたチャンネルに投稿され、そのチャンネルを閲覧できる全てのユーザーに表示されます。

#### 店舗設定

Botが管理する店舗の情報を登録します。売上や経費などを店舗ごとに管理するために必要です。

1.  **「店舗設定」ボタンをクリック**:
    *   設定パネル内の「店舗設定」ボタンを押します。
2.  **店舗情報の入力**:
    *   店舗の追加や編集を行うための画面が表示されます。
    *   「店舗追加」ボタンを押し、表示されたフォームに店舗名などの必須情報を入力して送信します。
    *   複数の店舗を運営している場合は、この作業を繰り返してすべての店舗を登録します。

#### 役職設定

Bot内での権限（例：「経費の承認ができる」「売上を報告できる」など）と、サーバーに既に存在するDiscordの「ロール」を結びつけます。これにより、特定の役職を持つ従業員だけが特定の操作を行えるようになります。

1.  **「役職設定」ボタンをクリック**:
    *   設定パネル内の「役職設定」ボタンを押します。
2.  **役職とロールの紐付け**:
    *   「役職を追加」などのボタンを押し、設定画面を開きます。
    *   まず、Botが認識する役職名（例：店長、マネージャー、一般）を選択、または入力します。
    *   次に、その役職に紐付けたいDiscordサーバー上のロール（例：@店長ロール）をプルダウンメニューから選択します。
    *   例えば、「店長」という役職に、Discordの「@運営」ロールを割り当てることで、「@運営」ロールを持つメンバーがBot上で店長としての権限を行使できるようになります。 [1, 6, 8]
    *   必要な役職分、この設定を繰り返します。

これらの初期設定が完了すると、経費申請や売上報告など、Botの各機能が利用可能になります。

#### ログ設定

Botの動作ログ（誰がいつどのコマンドを実行したかなど）や、エラーが発生した際のログを指定したチャンネルに出力するための設定です。問題発生時の原因調査などに役立ちます。

1.  **「ログ設定」ボタンをクリック**:
    *   設定パネル内の「ログ設定」ボタンを押します。
2.  **出力先チャンネルの設定**:
    *   ログの種類（例：操作ログ、エラーログ、経費申請ログ）ごとに、どのチャンネルに通知を送信するかを選択します。
    *   管理者のみが閲覧できるプライベートなチャンネルを指定することを推奨します。

#### ユーザー設定

Botを利用するユーザーの情報を管理する機能です。Botに登録されているユーザーの一覧を確認したり、個別のユーザー情報を編集したりできます。

1.  **「ユーザー設定」ボタンをクリック**:
    *   設定パネル内の「ユーザー設定」ボタンを押します。
2.  **ユーザーの確認と編集**:
    *   Botに登録されているDiscordユーザーの一覧が表示されます。
    *   特定のユーザーを選択すると、そのユーザーに紐付けられている店舗や役職などの情報を確認・編集できます。
    *   手動でユーザーの役職を変更したり、登録を削除したりすることが可能です。

---

---

## 2. 経費の申請と管理　（/設定経費）

日々の経費をBot経由で申請し、管理者が承認・否認を行う機能です。

### 管理者向け操作（初回設定）

1.  **コマンド実行**:
    *   `/設定経費` コマンドを実行します。
2.  **経費申請パネルの作成**:
    *   表示された設定画面で「経費申請パネル作成」ボタンを押し、申請用パネルを設置したいチャンネルなどを指定します。
3.  **詳細設定**:
    *   作成されたパネルで、経費の項目（例：交通費、交際費）や、申請を承認する役職などを設定します。

### 従業員向け操作（経費申請）

1.  **申請パネル操作**:
    *   指定されたチャンネルにある「経費申請パネル」の「申請」ボタンを押します。
2.  **情報入力**:
    *   表示されたフォームに、日付、経費の項目、金額、理由、領収書の画像などを入力・添付して送信します。
3.  **結果確認**:
    *   申請が承認または否認されると、BotからDM（ダイレクトメッセージ）で通知が届きます。

---

## 3. 売上の報告と管理

日々の売上をBot経由で報告する機能です。

### 管理者向け操作（初回設定）

1.  **コマンド実行**:
    *   `/設定売上` コマンドを実行します。
2.  **売上報告パネルの作成**:
    *   表示された設定画面で「売上報告パネル作成」ボタンを押し、報告用パネルを設置します。

### 従業員向け操作（売上報告）

1.  **報告パネル操作**:
    *   指定されたチャンネルにある「売上報告パネル」の「報告」ボタンを押します。
2.  **情報入力**:
    *   表示されたフォームに、日付や売上金額などを入力して送信します。

---

## 4. 出勤・退勤の打刻

Discord上で出退勤の時間を記録する機能です。

### 管理者向け操作（初回設定）

1.  **コマンド実行**:
    *   `/設定出退勤` コマンドを実行します。
2.  **打刻パネルの作成**:
    *   表示された設定画面で「出退勤パネル作成」ボタンを押し、従業員が打刻を行うためのパネルを設置します。

### 従業員向け操作（打刻）

1.  **出勤**:
    *   業務を開始する際に「出勤」ボタンを押します。
2.  **退勤**:
    *   業務を終了する際に「退勤」ボタンを押します。

---

## 5. メッセージ一括送信

指定した複数のチャンネルに、同じメッセージを一括で送信する機能です。

### 管理者向け操作

1.  **コマンド実行**:
    *   `/メッセージ` コマンドを実行します。
2.  **送信設定**:
    *   表示されたパネルで、メッセージを送信したいチャンネルを選択します。
    *   送信するメッセージ内容を作成します。（テンプレートの利用も可能です）
3.  **送信**:
    *   「送信」ボタンを押すと、選択したすべてのチャンネルにメッセージが投稿されます。

---

## 6. KPI（目標）管理

店舗ごとの目標（KPI）を設定・管理する機能です。

### 管理者向け操作

1.  **コマンド実行**: `/設定KPI`
2.  **目標設定**: 表示されたパネルから、店舗や年月を指定し、売上などの目標値を設定します。

---

## 7. 店内状況・ひっかけ管理

### 管理者向け操作

1.  **コマンド実行**: `/設定店内状況_ひっかけ`
2.  **設定**: 表示されたパネルから、店舗ごとの「店内状況」や「ひっかけ（よくある質問や注意点など）」のリストを編集・管理します。

---

## 8. ChatGPT連携

### 管理者向け操作

1.  **コマンド実行**: `/設定chat_gpt`
2.  **設定**: 表示されたパネルから、ChatGPTの利用設定や、回答を投稿するチャンネルなどを設定します。

---

## 9. くじ引き

### 全ユーザー向け操作

1.  **コマンド実行**: `/設定くじ引き`
2.  **実行**: 表示されたパネルのボタンを押すと、設定された景品の中からランダムで抽選が行われます。

---

## 10. ダイス

### 全ユーザー向け操作

1.  **コマンド実行**: `/設定ダイス`
2.  **実行**: ボタンを押すとサイコロを振ることができます。