/**
 * src/utils/logger.js
 * „É≠„Ç∞Âá∫Âäõ„É¶„Éº„ÉÜ„Ç£„É™„ÉÜ„Ç£
 * Ôºàwinston „ÇíÂà©Áî®„Åó„Å¶„É≠„Ç∞„É¨„Éô„É´Âà•„Å´Âá∫ÂäõÔºâ
 */

const winston = require('winston');

// -------------------------------------------------------------
// üß© „É≠„Ç¨„ÉºË®≠ÂÆö
// -------------------------------------------------------------
const logger = winston.createLogger({
  // „É≠„Ç∞„É¨„Éô„É´Ôºàinfo ‰ª•‰∏ä„ÇíÂá∫ÂäõÔºâ
  level: 'info',

  // Âá∫Âäõ„Éï„Ç©„Éº„Éû„ÉÉ„ÉàË®≠ÂÆö
  format: winston.format.combine(
    // „Çø„Ç§„É†„Çπ„Çø„É≥„Éó„ÅÆ„Éï„Ç©„Éº„Éû„ÉÉ„Éà
    winston.format.timestamp({ format: 'YYYY-MM-DD HH:mm:ss' }),
    // Âá∫Âäõ„É°„ÉÉ„Çª„Éº„Ç∏ÂΩ¢Âºè„ÅÆÊï¥ÂΩ¢
    winston.format.printf(
      (info) => `[${info.level.toUpperCase()} ${info.timestamp}] ${info.message}`
    )
  ),

  // Âá∫ÂäõÂÖàÔºà„Åì„Åì„Åß„ÅØ„Ç≥„É≥„ÇΩ„Éº„É´Ôºâ
  transports: [new winston.transports.Console()],
});

// -------------------------------------------------------------
// üß© debug „É≠„Ç∞„ÅÆ„Çµ„Éù„Éº„ÉàÔºàÈñãÁô∫ÊôÇ„ÅÆ„ÅøÔºâ
// -------------------------------------------------------------
// winston „ÅØ info „É¨„Éô„É´‰ª•‰∏ã„ÇíÂá∫„Åï„Å™„ÅÑ„Åü„ÇÅ„ÄÅ
// ÈñãÁô∫‰∏≠„Åß„ÇÇ„Éá„Éê„ÉÉ„Ç∞Âá∫Âäõ„Åå„Åß„Åç„Çã„Çà„ÅÜ„Å´ÊòéÁ§∫ÁöÑ„Å´ÂÆöÁæ©„ÄÇ
logger.debug = (...args) => {
  if (process.env.NODE_ENV !== 'production') {
    console.log('[DEBUG]', ...args);
  }
};

// -------------------------------------------------------------
// üß© „Ç®„ÇØ„Çπ„Éù„Éº„Éà
// -------------------------------------------------------------
module.exports = logger;
